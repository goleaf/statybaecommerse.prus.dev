<?php

declare(strict_types=1);

namespace Tests\Feature;

use Illuminate\Support\Facades\Blade;
use Tests\TestCase;

final class IconRenderingTest extends TestCase
{
    public function test_account_card_link_renders_known_icon(): void
    {
        $html = Blade::render('<x-account-card-link href="/" icon="untitledui-shopping-bag" title="T" description="D" />');
        $this->assertStringContainsString('<svg', $html);
    }

    public function test_account_card_link_fallback_for_unknown_icon(): void
    {
        $html = Blade::render('<x-account-card-link href="/" icon="untitledui-non-existent" title="T" description="D" />');
        $this->assertStringContainsString('<svg', $html);
    }

    public function test_direct_icon_components_render(): void
    {
        $known = Blade::render('<x-untitledui-shopping-bag class="size-5" />');
        $this->assertStringContainsString('<svg', $known);

        $fallback = Blade::render('<x-app-icon name="untitledui-unknown" class="size-5" />');
        $this->assertStringContainsString('<svg', $fallback);
    }

    public function test_all_referenced_untitledui_components_render(): void
    {
        $components = [
            'untitledui-shopping-bag',
            'untitledui-shopping-bag-03',
            'untitledui-star-07',
            'untitledui-shield-tick',
            'untitledui-globe-05',
            'untitledui-heart',
            'untitledui-file-02',
            'untitledui-bell-01',
            'untitledui-phone',
            'untitledui-x',
            'untitledui-gift-02',
            'untitledui-info-circle',
            'untitledui-tag',
            'untitledui-pencil-02',
            'untitledui-user-circle',
            'untitledui-log-out',
            'untitledui-check-circle',
            'untitledui-chevron-right',
            'untitledui-mail-02',
            'untitledui-arrow-narrow-right',
        ];

        foreach ($components as $name) {
            $html = Blade::render('<x-app-icon :name="$name" class="size-4" />', ['name' => $name]);
            $this->assertStringContainsString('<svg', $html, sprintf('Icon %s did not render as <svg>', $name));
        }
    }
}
